// By Alex_Mercer
Actor S7_Step : Boolean { }
Actor S7_IsUnderwater : Boolean { }
Actor S7_Dying : Boolean { }

Actor S7_AirTime : Counter { Inventory.MaxAmount 100 }

Actor S7_BasePlayer : PlayerPawn {
    // Damage
    GibHealth -50
    PainChance 255
    
    // Movement
    Player.ForwardMove 0.75, 0.75
    Player.SideMove 0.75, 0.75
    
    // Give Items/Weapons/Ammo
    Player.StartItem MeleeWeapon
    Player.StartItem S7_Raptor
    Player.StartItem S7_RaptorClip, 8
    Player.StartItem S7_Clip, 50
    Player.StartItem S7_MeleeKey
    Player.StartItem S7_ReloadKey
    Player.StartItem S7_FiringModeKey
    Player.StartItem S7_StaminaRegen
    Player.StartItem S7_Stamina, 150
    Player.StartItem S7_KickMelee
    
    // Class stuff
    Player.DisplayName "Player"
    
    // Weapon Slots
    Player.WeaponSlot 1, S7_Shotgun
    Player.WeaponSlot 2, S7_Raptor, S7_TEC9, S7_Revolver
    Player.WeaponSlot 3, S7_MeleeWeapon
    
    // Misc
    Radius 16
    Height 56
    Player.ViewHeight 48
    Player.AttackZOffset 20
    Player.InvulnerabilityMode Reflective
    Player.ColorRange 112, 127
    +Solid +NoSkin
    
    States {
    Spawn:
        PLAY AAAA 1
        Stop
        Loop
    See:
        TNT1 A 0 A_JumpIfInventory ("S7_Step", 1, "See2")
        PLAY AAAAAA 1
        PLAY BBBBBB 1
        TNT1 A 0 A_GiveInventory ("S7_Step", 1)
        Goto Spawn
    See2:
        PLAY CCCCCC 1
        PLAY DDDDDD 1
        TNT1 A 0 A_TakeInventory ("S7_Step", 1)
        Goto Spawn
    Missile:
        PLAY E 12
        Goto Spawn
    Melee:
        PLAY F 6 Bright
        Goto Missile
    Pain:
        PLAY G 4
        PLAY G 4 A_Pain
        Goto Spawn
    Death.Suicide:
    Death:
        PLAY H 10 A_PlayerScream
        PLAY I 10
        PLAY J 10 A_NoBlocking
        PLAY K 10
        TNT1 A 0 A_PlaySound ("Misc/Body", CHAN_BODY)
        PLAY LM 10
        PLAY N -1
        Stop
    XDeath:
        PLAY O 5
        PLAY P 5 A_XScream
        PLAY Q 5 A_NoBlocking
        PLAY RSTUV 5
        PLAY W -1
        Stop
    Death.Fire:
        BURN ABC 5 Bright
        BURN D 5 Bright
        BURN EFGHIJKLMN 5 Bright
        BURN O 5 Bright A_NoBlocking
        BURN PQRSTU 5 Bright
        BURN V -1
        Stop
    Death.Plasma:
        TNT1 A 0 Thing_SetTranslation (0, 7)
        TNT1 A 0 A_SpawnItemEx ("S7_BlackSmoke", random (-16, 16), random (-16, 16), random (8, 16), 0, 0, 1)
        PLAY H 10 A_PlayerScream
        TNT1 A 0 A_SpawnItemEx ("S7_BlackSmoke", random (-16, 16), random (-16, 16), random (8, 16), 0, 0, 1)
        PLAY I 10
        TNT1 A 0 A_SpawnItemEx ("S7_BlackSmoke", random (-16, 16), random (-16, 16), random (8, 16), 0, 0, 1)
        PLAY J 10 A_NoBlocking
        TNT1 A 0 A_SpawnItemEx ("S7_BlackSmoke", random (-16, 16), random (-16, 16), random (8, 16), 0, 0, 1)
        PLAY K 10
        TNT1 A 0 A_SpawnItemEx ("S7_BlackSmoke", random (-16, 16), random (-16, 16), random (8, 16), 0, 0, 1)
        PLAY L 10 A_PlaySound ("Misc/Body", CHAN_BODY)
        TNT1 A 0 A_SpawnItemEx ("S7_BlackSmoke", random (-16, 16), random (-16, 16), random (8, 16), 0, 0, 1)
        PLAY M 10
        TNT1 A 0 A_SpawnItemEx ("S7_BlackSmoke", random (-16, 16), random (-16, 16), random (8, 16), 0, 0, 1)
        PLAY NNNNNNNNNNNNNNNNNN 5 A_SpawnItemEx ("S7_BlackSmoke", random (-16, 16), random (-16, 16), random (8, 16), 0, 0, 1)
        PLAY N -1
        Stop
    }
}

// Null Weapon
Actor S7_NullWeapon : Weapon {
    Tag "Unarmed"
    +Inventory.Undroppable +Weapon.Wimpy_Weapon +Weapon.CheatNotWeapon +NoInteraction
    +Weapon.NoAlert
    Height 0
    Radius 0
    States {
    Spawn:
        TNT1 A 0
        Stop
    Select:
        TNT1 A 1 A_Raise
        TNT1 A 0 A_Raise
        Wait
    Deselect:
        TNT1 A 0 A_Lower
        Wait
    Ready:
        TNT1 A 1 A_WeaponReady (WRF_NOFIRE|WRF_NOBOB|WRF_NOSWITCH)
        Loop
    Fire:
        TNT1 A 1
        Goto Ready
    }
}

Actor S7_Sprinting : Boolean { }
Actor S7_SprintWeapon : S7_NullWeapon {
    States {
    Ready:
        TNT1 AA 1 A_WeaponReady (WRF_NOFIRE|WRF_NOBOB|WRF_NOSWITCH)
        TNT1 A 1 A_GiveInventory ("S7_Sprinting", 1)
    Ready2:
        TNT1 A 0 A_JumpIfInventory ("S7_Sprinting", 1, 1)
        Goto Ready3
        TNT1 A 1 A_WeaponReady (WRF_NOFIRE|WRF_NOBOB|WRF_NOSWITCH)
        Loop
    Ready3:
        TNT1 A 1 A_WeaponReady (WRF_NOFIRE|WRF_NOBOB)
        Loop
    Deselect:
        TNT1 AA 1 A_TakeInventory ("S7_Sprinting", 99999)
        TNT1 A 1 A_Lower
        TNT1 A 0 A_Lower
        Wait
    }
}

// Kicking
Actor S7_DoMelee : Boolean { }
Actor S7_MeleeKey : CustomInventory {
    Inventory.Amount 1
    Inventory.MaxAmount 1
    +Inventory.Undroppable -InvBar
    States {
    Use:
        TNT1 A 0 A_GiveInventory ("S7_DoMelee", 1)
        Fail
    }
}

// Reload
Actor S7_Reloading : Boolean { }
Actor S7_ReloadKey : CustomInventory {
    Inventory.Amount 1
    Inventory.MaxAmount 1
    +Inventory.Undroppable -InvBar
    States {
    Use:
        TNT1 A 0 A_GiveInventory ("S7_Reloading", 1)
        Fail
    }
}

// Reload
Actor S7_ChangeFireMode : Boolean { }
Actor S7_FiringModeKey : CustomInventory {
    Inventory.Amount 1
    Inventory.MaxAmount 1
    +Inventory.Undroppable -InvBar
    States {
    Use:
        TNT1 A 0 A_GiveInventory ("S7_ChangeFireMode", 1)
        Fail
    }
}

// Drop Weapon
Actor S7_DropDatWeapon : Boolean { }
Actor S7_DropWeaponKey : CustomInventory {
    Inventory.Amount 1
    Inventory.MaxAmount 1
    +Inventory.Undroppable -InvBar
    States {
    Use:
        TNT1 A 0 A_GiveInventory ("S7_DropDatWeapon", 1)
        Fail
    }
}

// Stamina Regeneration
Actor S7_StaminaRegen : Boolean { }
Actor S7_Stamina      : Counter { Inventory.MaxAmount 150 }

// AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
Actor GETTHATSHITOUTTAHERE {
    Health -1
    Radius 20
    Height 56
    Mass 500
    Speed 10
    PainChance 100
    SeeSound "skeleton/sight"
    PainSound "skeleton/sight"
    DeathSound "skeleton/sight"
    ActiveSound "skeleton/sight"
    Monster
    +Invulnerable +NoDamage +NoClip +MissileMore
    +MissileEvenMore +FloorClip +LookAllAround -CountKill
    -Solid -Shootable -IsMonster
    States {
    Spawn:
        SKEL AB 5 A_Look
        Loop
    See:
        SKEL AABBCCDDEEFF 1 A_Chase
        Loop
    /*Melee:
        SKEL G 0 A_FaceTarget
        SKEL G 1 A_SkelWhoosh
        SKEL H 1 A_FaceTarget
        SKEL I 0 A_CustomMeleeAttack(0)
        SKEL I 1 A_PlaySound ("skeleton/melee")
        Goto See*/
    Missile:
        SKEL J 0 Bright A_FaceTarget
        SKEL J 5 Bright A_FaceTarget
        SKEL K 5 A_CustomMissile ("GETTHATSHITOUTTAHERETRACER")
        SKEL K 5 A_FaceTarget
        Goto See
    Pain:
        SKEL L 2
        SKEL L 2 A_Pain
        Goto See
    }
}

Actor GETTHATSHITOUTTAHERETRACER : FastProjectile {
    Radius 11
    Height 8
    Damage 0
    Speed 1000
    Projectile
    +SeekerMissile +Randomize
    SeeSound "skeleton/attack"
    DeathSound "skeleton/tracex"
    RenderStyle Add
    States {
    Spawn:
        FATB AB 1 Bright A_Tracer
        Loop
    Death:
        FBXP A 1 Bright
        FBXP B 1 Bright
        FBXP C 1 Bright
        Stop
    }
}

// Weapon slot tokens
Actor S7_Slot1Taken : Boolean { }
Actor S7_Slot2Taken : Boolean { }
Actor S7_Slot3Taken : Boolean { }
Actor S7_Slot4Taken : Boolean { }
Actor S7_Slot5Taken : Boolean { }
Actor S7_Slot6Taken : Boolean { }
Actor S7_Slot7Taken : Boolean { }
Actor S7_Slot8Taken : Boolean { }
Actor S7_Slot9Taken : Boolean { }
Actor S7_Slot0Taken : Boolean { }